<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en" dir="ltr">

<!-- Mirrored from jsimlo.sk/docs/cpu/index.php/cmpxchg.html by HTTrack Website Copier/3.x [XR&CO'2010], Wed, 12 Sep 2012 14:46:34 GMT -->
<head>
 <title>Intel Pentium Instruction Set Reference - CMPXCHG - Compare and Exchange</title>
 <meta http-equiv="Content-Type" content="text/html; charset=windows-1250" />
 <meta name="Author" content="jsimlo@yahoo.com (Medvedik)" />
 <meta name="Robots" content="index,follow" />
 <meta name="Keywords" content="intel, pentium, instruction, instructions, reference, asm, assembly, assmebler, cpu, 80386, 386, 80486, 486, 80x86, x86" />
 <meta name="Description" content="Intel Pentium Instruction Set Reference - CMPXCHG - Compare and Exchange" />
 <style type="text/css"><!--
  @import 'style.css';
 --></style>
</head>
<body>

<a name="go-menu"></a>

<div class="jump">
<hr />
<i>Quick navigation: [ <a href="#go-body">Jump to body</a> ]</i>
<hr />
</div>

<div id="menu">
<div id="menu-in">

<h1>Menu</h1>

<h2>Intro</h2>

<ul>
<li><a href="index.html">Home</a></li>
<li><a href="architecture.html">Architecture Overview</a></li>
<li><a href="conventions.html">Conventions</a></li>
</ul>

<h2>Instructions</h2>

<div class="ilist">
<a href="index.html#a">A</a>
<a href="index.html#b">B</a>
<a href="index.html#c">C</a>
<a href="index.html#d">D</a>
<a href="index.html#e">E</a>
<a href="index.html#f">F</a>
<a href="index.html#g">G</a>
<a href="index.html#h">H</a>
<a href="index.html#i">I</a>
<a href="index.html#j">J</a>
<a href="index.html#k">K</a>
<a href="index.html#l">L</a>
<a href="index.html#m">M</a>
<a href="index.html#n">N</a>
<a href="index.html#o">O</a>
<a href="index.html#p">P</a>
<a href="index.html#q">Q</a>
<a href="index.html#r">R</a>
<a href="index.html#s">S</a>
<a href="index.html#t">T</a>
<a href="index.html#u">U</a>
<a href="index.html#v">V</a>
<a href="index.html#w">W</a>
<a href="index.html#x">X</a>
<a href="index.html#y">Y</a>
<a href="index.html#z">Z</a>
</div>




<div class="tools" align="center">
<p>[<a href="#">jump to top</a>]</p>
</div>

</div><!-- #menu-in -->
</div><!-- #menu -->
<a name="go-body"></a>

<div class="jump">
<hr />
<i>Quick navigation: [ <a href="#go-menu">Jump to menu</a> ]</i>
<hr />
</div>

<div id="body">

<h1>Intel Pentium Instruction Set Reference</h1>

<h1>CMPXCHG - Compare and Exchange</h1>

<table border="1" cellpadding="5" class="info">
<tr>
<th>Code</th>
<th>Mnemonic</th>
<th>Description</th>
</tr>
<tr>
<td nowrap="nowrap">0F B0/ r</td>
<td nowrap="nowrap">CMPXCHG r/m8, r8</td>
<td>Compare AL with r/m8. If equal, ZF is set and r8 is loaded into r/m8. Else, clear ZF and load r/m8 into AL.</td>
</tr>
<tr>
<td nowrap="nowrap">0F B1/ r</td>
<td nowrap="nowrap">CMPXCHG r/m16, r16</td>
<td>Compare AX with r/m16. If equal, ZF is set and r16 is loaded into r/m16. Else, clear ZF and load r/m16 into AL</td>
</tr>
<tr>
<td nowrap="nowrap">0F B1/ r</td>
<td nowrap="nowrap">CMPXCHG r/m32, r32</td>
<td>Compare EAX with r/m32. If equal, ZF is set and r32 is loaded into r/m32. Else, clear ZF and load r/m32 into AL</td>
</tr>
</table>

<h2>Description</h2>

<p>Compares the value in the AL, AX, or EAX register (depending on the size of the operand) with the first operand (destination operand). If the two values are equal, the second operand (source operand) is loaded into the destination operand. Otherwise, the destination operand is loaded into the AL, AX, or EAX register.</p>

<p>This instruction can be used with a <a href="lock.html">LOCK</a> prefix to allow the instruction to be executed atomically. To simplify the interface to the processor's bus, the destination operand receives a write cycle without regard to the result of the comparison. The destination operand is written back if the comparison fails; otherwise, the source operand is written into the destination. (The processor never produces a locked read without also producing a locked write.)</p>

<table border="1" cellpadding="5" class="info">
<tr>
<th>Operands</th>
<th>Bytes</th>
<th colspan="2">Clocks</th>
</tr>
<tr>
<td>reg, reg</td>
<td>3</td>
<td>5</td>
<td>NP</td>
</tr>
<tr>
<td>mem, reg</td>
<td>3 + d(0 - 2)</td>
<td>6</td>
<td>NP</td>
</tr>
</table>

<h2>Flags</h2>

<table border="1" cellpadding="5" class="info">
<tr>
<th>ID</th>
<td>unaffected</td>
<th>DF</th>
<td>unaffected</td>
</tr>
<tr>
<th>VIP</th>
<td>unaffected</td>
<th>IF</th>
<td>unaffected</td>
</tr>
<tr>
<th>VIF</th>
<td>unaffected</td>
<th>TF</th>
<td>unaffected</td>
</tr>
<tr>
<th>AC</th>
<td>unaffected</td>
<th>SF</th>
<td>sets according to the results of the comparison operation</td>
</tr>
<tr>
<th>VM</th>
<td>unaffected</td>
<th>ZF</th>
<td>sets if the values in the destination operand and register AL, AX, or EAX are equal; otherwise it is cleared</td>
</tr>
<tr>
<th>RF</th>
<td>unaffected</td>
<th>AF</th>
<td>sets according to the results of the comparison operation</td>
</tr>
<tr>
<th>NT</th>
<td>unaffected</td>
<th>PF</th>
<td>sets according to the results of the comparison operation</td>
</tr>
<tr>
<th>IOPL</th>
<td>unaffected</td>
<th>CF</th>
<td>sets according to the results of the comparison operation</td>
</tr>
<tr>
<th>OF</th>
<td>sets according to the results of the comparison operation</td>
</tr>
</table>

</div><!-- #body -->





</div>
</body>
<!-- Mirrored from jsimlo.sk/docs/cpu/index.php/cmpxchg.html by HTTrack Website Copier/3.x [XR&CO'2010], Wed, 12 Sep 2012 14:46:34 GMT -->
</html>